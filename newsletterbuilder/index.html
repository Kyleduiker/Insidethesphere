<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- üìù CUSTOMIZE: Change the page title -->
    <title>New Page - Inside The Sphere</title>
    
    <!-- External CSS Files (adjust paths if page is in subfolder) -->
    <!-- For root level pages: use these paths -->
    <link rel="stylesheet" href="assets/css/navigation.css">
    <link rel="stylesheet" href="assets/css/main.css">
    
    <!-- For pages in subfolders: uncomment these and comment out the above -->
    <!-- <link rel="stylesheet" href="../assets/css/navigation.css"> -->
    <!-- <link rel="stylesheet" href="../assets/css/main.css"> -->
    
    <!-- üé® PAGE-SPECIFIC STYLES: Add custom styles for this page here -->
    <style>
        /* Custom styles for this specific page */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 120px 20px 60px; /* Top padding accounts for fixed nav */
            text-align: center;
        }

        .hero-section h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .hero-section p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .content-section {
            padding: 80px 0;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .feature-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .cta-section {
            background: #2c3e50;
            color: white;
            padding: 80px 0;
            text-align: center;
        }

        /* üì± RESPONSIVE: Mobile adjustments */
        @media (max-width: 768px) {
            .hero-section {
                padding: 100px 20px 40px;
            }

            .hero-section h1 {
                font-size: 2rem;
            }

            .two-column {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ‚úÖ NAVIGATION: Always include this navigation system -->
    <nav class="sphere-nav">
        <div class="sphere-nav-container">
            <a href="/" class="sphere-logo">Inside The Sphere</a>
            <button class="sphere-menu-btn" onclick="toggleSphereMenu()">
                <span>‚ò∞</span>
                <span>Menu</span>
            </button>
        </div>
    </nav>

    <!-- Navigation Overlay -->
    <div class="sphere-overlay" id="sphereOverlay" onclick="closeSphereMenu()"></div>

    <!-- Navigation Popout Menu -->
    <div class="sphere-popout-menu" id="spherePopoutMenu">
        <div class="sphere-menu-header">
            <div class="sphere-menu-title">Navigation</div>
            <div class="sphere-menu-subtitle">Inside The Sphere</div>
        </div>

        <div class="sphere-menu-items">
            <a href="/" class="sphere-menu-item">
                <div class="sphere-menu-icon sphere-icon-home">üè†</div>
                <div class="sphere-menu-text">Home</div>
            </a>

            <a href="/smarttools/" class="sphere-menu-item">
                <div class="sphere-menu-icon sphere-icon-tools">üõ†Ô∏è</div>
                <div class="sphere-menu-text">Smart Tools</div>
            </a>

            <a href="/newsletter/" class="sphere-menu-item">
                <div class="sphere-menu-icon sphere-icon-newsletter">üìß</div>
                <div class="sphere-menu-text">Newsletter Builder</div>
            </a>

            <!-- üìù CUSTOMIZE: Add more menu items here -->
            <!-- 
            <a href="/your-new-page/" class="sphere-menu-item">
                <div class="sphere-menu-icon" style="background: #9b59b6;">üÜï</div>
                <div class="sphere-menu-text">Your New Page</div>
            </a>
            -->
        </div>
    </div>

    <!-- Newsletter Builder Pro Styles -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #f39c12;
            --primary-dark: #e67e22;
            --secondary-color: #27ae60;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --info-color: #3498db;
            --border-color: #e0e0e0;
            --background-dark: #2c3e50;
            --background-light: #f8f9fa;
            --background-card: #ffffff;
            --text-light: #2c3e50;
            --text-muted: #666666;
            --text-secondary: #999999;
            --text-dark: #2c3e50;
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(243, 156, 18, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--background-light);
            color: var(--text-light);
            min-height: 100vh;
            line-height: 1.5;
            padding-top: 70px; /* Account for fixed navigation */
        }

        /* Main Content Section */
        .main-content {
            padding: 40px 20px;
            background: var(--background-light);
            min-height: 100vh;
        }

        .content-container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Dashboard Layout */
        .dashboard-container {
            display: grid;
            grid-template-columns: 500px 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        .sidebar {
            background: var(--background-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            overflow-y: auto;
            max-height: 90vh;
            position: sticky;
            top: 20px;
            box-shadow: var(--box-shadow);
        }

        .preview-container {
            background: var(--background-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            overflow-y: auto;
            max-height: 90vh;
            position: sticky;
            top: 20px;
            box-shadow: var(--box-shadow);
        }

        /* App Header */
        .app-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 30px 25px;
            text-align: center;
        }

        .app-header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 26px;
            font-weight: 400;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .app-header .subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .app-header .edition-badge {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 5px;
            font-size: 12px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Form Sections */
        .form-content {
            padding: 30px 25px;
        }

        .form-section {
            margin-bottom: 35px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 25px;
            background: var(--background-card);
        }

        .form-section__header {
            color: var(--primary-color);
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-section__header::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group__label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-muted);
            font-size: 13px;
        }

        .form-group__input,
        .form-group__textarea,
        .form-group__select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            font-family: 'Montserrat', sans-serif;
            transition: var(--transition);
            background: var(--background-card);
            color: var(--text-light);
            min-height: 44px;
        }

        .form-group__select {
            background: var(--background-card);
            color: var(--text-light);
        }

        .form-group__select option {
            background: var(--background-card);
            color: var(--text-light);
            padding: 8px;
        }

        .form-group__input:focus,
        .form-group__textarea:focus,
        .form-group__select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(243, 156, 18, 0.1);
            transform: translateY(-1px);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: var(--background-card);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 12px 15px;
            transition: var(--transition);
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 44px;
        }

        .stat-item:focus-within {
            border-color: var(--primary-color);
        }

        .stat-item__label {
            font-size: 11px;
            text-transform: uppercase;
            color: var(--text-muted);
            font-weight: 600;
            letter-spacing: 0.5px;
            margin: 0;
            flex: 1;
        }

        .stat-item__input {
            border: none;
            padding: 0;
            font-size: 15px;
            font-weight: 600;
            color: var(--primary-color);
            background: transparent;
            text-align: right;
            width: 100px;
            flex-shrink: 0;
        }

        .stat-item__input:focus {
            outline: 1px solid var(--primary-color);
            border-radius: 4px;
            padding: 4px;
        }

        /* Buttons */
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 13px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            min-height: 44px;
            justify-content: center;
            text-decoration: none;
        }

        .btn:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        .btn--primary {
            background: var(--primary-color);
            color: white;
        }

        .btn--primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(243, 156, 18, 0.3);
        }

        .btn--secondary {
            background: #666666;
            color: white;
        }

        .btn--success {
            background: var(--success-color);
            color: white;
        }

        .btn--info {
            background: var(--info-color);
            color: white;
        }

        .btn--full {
            width: 100%;
            justify-content: center;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay--show {
            display: flex;
        }

        .modal {
            background: var(--background-card);
            border: 1px solid var(--border-color);
            padding: 30px;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            min-width: 300px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-size: 14px;
            box-shadow: var(--box-shadow);
            animation: slideIn 0.3s ease-out;
            position: relative;
            overflow: hidden;
        }

        .toast--success { background: var(--success-color); }
        .toast--error { background: var(--danger-color); }
        .toast--warning { background: var(--warning-color); }
        .toast--info { background: var(--info-color); }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Preview Styles */
        .preview-header {
            background: var(--background-light);
            padding: 25px;
            border-radius: var(--border-radius);
            margin-bottom: 25px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .preview-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .newsletter-preview {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            max-width: 700px;
            margin: 0 auto 20px auto;
            color: var(--text-dark);
        }

        /* Event Items */
        .event-item {
            background: var(--background-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .event-delete {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--danger-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            min-height: 44px;
        }

        .image-preview {
            display: flex;
            align-items: center;
            padding: 10px;
            background: var(--background-light);
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .required-field::after {
            content: ' *';
            color: var(--danger-color);
            font-weight: bold;
        }

        .validation-message {
            font-size: 12px;
            margin-top: 5px;
            display: none;
            line-height: 1.4;
        }

        .validation-message.error {
            color: var(--danger-color);
            display: block;
        }

        .validation-message.success {
            color: var(--success-color);
            display: block;
        }

        /* Compatibility Warning */
        .compatibility-warning {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 2px solid #ff9800;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            color: #856404;
        }

        .compatibility-warning h4 {
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .compatibility-warning ul {
            color: #856404;
            margin: 0;
            padding-left: 20px;
        }

        .compatibility-info {
            background: #d1ecf1;
            border: 2px solid #17a2b8;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #0c5460;
        }

        /* Mobile Responsive */
        @media (max-width: 1023px) {
            .dashboard-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .sidebar {
                height: auto;
                max-height: none;
                position: static;
            }
            
            .preview-container {
                position: static;
                max-height: none;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }

        @media (max-width: 767px) {
            .main-content {
                padding: 30px 10px;
            }
            
            .form-content {
                padding: 20px 15px;
            }
            
            .form-section {
                padding: 15px;
                margin-bottom: 20px;
            }
            
            .preview-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .preview-actions .btn {
                width: 100%;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.8s ease;
        }

        /* File input styling */
        .form-group__input[type="file"] {
            padding: 8px 15px;
            cursor: pointer;
        }

        .form-group__input[type="file"]::-webkit-file-upload-button {
            background: var(--primary-color);
            color: #000;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            margin-right: 10px;
            font-size: 12px;
            cursor: pointer;
        }

        /* Color input styling */
        .form-group__input[type="color"] {
            height: 44px;
            padding: 4px;
        }

        /* Enhanced select dropdown styling for light theme */
        .form-group__select {
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23f39c12' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
        }

        /* Firefox specific select styling */
        @-moz-document url-prefix() {
            .form-group__select {
                background: var(--background-card);
                color: var(--text-light);
            }
        }

        /* Section headers in stats */
        .stats-section-header {
            font-size: 13px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Quick color buttons */
        .quick-color-btn {
            width: 30px;
            height: 30px;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
        }

        .quick-color-btn:hover {
            transform: scale(1.1);
            border-color: var(--primary-color);
        }

        small {
            color: var(--text-secondary);
            font-size: 11px;
        }

        /* Emoji picker styles */
        .emoji-btn {
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 10px;
            font-size: 18px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emoji-btn:hover {
            background: var(--background-light);
            border-color: var(--primary-color);
            transform: scale(1.1);
        }

        .emoji-btn:active {
            transform: scale(0.95);
        }
    </style>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Export Modal -->
    <div class="modal-overlay" id="exportModal">
        <div class="modal">
            <h3 style="margin-bottom: 20px; font-size: 20px; color: var(--primary-color);">üìß Export Newsletter</h3>
            
            <div class="compatibility-warning">
                <h4>‚úÖ Email Client Compatibility</h4>
                <ul style="margin: 10px 0; font-size: 13px; line-height: 1.4;">
                    <li>All images are automatically uploaded to Imgur for perfect email compatibility</li>
                    <li>Newsletter uses hosted image URLs - works in all email clients</li>
                    <li>No blocked images or deliverability issues</li>
                    <li>Always test in your target email clients before sending</li>
                    <li>Professional hosting ensures images load reliably</li>
                </ul>
            </div>
            
            <div class="compatibility-info">
                <h4>üìä Email Client Support</h4>
                <div>
                    ‚úÖ <strong>Gmail:</strong> Excellent support<br>
                    ‚úÖ <strong>Apple Mail:</strong> Best support
                </div>
            </div>

            <div class="compatibility-info">
                <h4>üñ®Ô∏è Print Optimization</h4>
                <div>
                    <strong>Print Version:</strong> Optimized for standard letter paper (8.5" x 11")<br>
                    <strong>Features:</strong> Proper margins, page breaks, black & white friendly<br>
                    <strong>Best For:</strong> Client handouts, office distribution, archival copies
                </div>
            </div>
            
            <div style="display: grid; gap: 10px; margin-top: 20px;">
                <button class="btn btn--primary" onclick="exportManager.copyEmailSafeHTML()">
                    üìß Copy Newsletter for email
                </button>
                <button class="btn btn--success" onclick="exportManager.exportAsHTML()">
                    üìÑ Download HTML File (Hosted URLs)
                </button>
                <button class="btn btn--info" onclick="exportManager.printNewsletter()">
                    üñ®Ô∏è Print Newsletter
                </button>
                <button class="btn btn--secondary" onclick="modalManager.close('exportModal')">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div class="modal-overlay" id="addEventModal">
        <div class="modal">
            <h3 style="margin-bottom: 20px; color: var(--primary-color);">Add Event</h3>
            <form id="addEventForm">
                <div class="form-group">
                    <label class="form-group__label required-field">Event Title</label>
                    <input type="text" class="form-group__input" id="eventTitle" required>
                    <div class="validation-message" id="eventTitle-validation"></div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-group__label required-field">Date</label>
                        <input type="date" class="form-group__input" id="eventDate" required>
                        <div class="validation-message" id="eventDate-validation"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-group__label">Start Time</label>
                        <input type="time" class="form-group__input" id="eventStartTime">
                        <div class="validation-message" id="eventStartTime-validation"></div>
                        <small>Optional - leave blank for all-day events</small>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-group__label">End Time</label>
                    <input type="time" class="form-group__input" id="eventEndTime">
                    <div class="validation-message" id="eventEndTime-validation"></div>
                    <small>Optional - leave blank if no specific end time</small>
                </div>
                <div class="form-group">
                    <label class="form-group__label">Location</label>
                    <input type="text" class="form-group__input" id="eventLocation">
                    <div class="validation-message" id="eventLocation-validation"></div>
                    <small>Optional - leave blank for online events or TBA</small>
                </div>
                <div class="form-group">
                    <label class="form-group__label">Description (Optional)</label>
                    <textarea class="form-group__textarea" id="eventDescription" rows="3"></textarea>
                    <div class="validation-message" id="eventDescription-validation"></div>
                </div>
                <div class="form-group">
                    <label class="form-group__label">Event Details Link (Optional)</label>
                    <input type="url" class="form-group__input" id="eventDetailsLink" placeholder="https://example.com/event-details">
                    <div class="validation-message" id="eventDetailsLink-validation"></div>
                    <small>Optional - link to registration page, more details, or event website</small>
                </div>
                <div class="form-group">
                    <label class="form-group__label">Event Image (Optional)</label>
                    <input type="file" class="form-group__input" id="eventImage" accept="image/*" onchange="handleEventImageUpload()">
                    <div class="image-preview" id="eventImagePreview" style="margin-top: 10px; display: none;">
                        <img style="width: 120px; height: 80px; object-fit: cover; border-radius: 4px; border: 2px solid #ddd;">
                        <button type="button" onclick="removeEventImage()" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">Remove</button>
                    </div>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn btn--primary" style="flex: 1;">Add Event</button>
                    <button type="button" class="btn btn--secondary" onclick="modalManager.close('addEventModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Custom Property Type Modal -->
    <div class="modal-overlay" id="addCustomPropertyTypeModal">
        <div class="modal">
            <h3 style="margin-bottom: 20px; color: var(--primary-color);">Add Custom Property Type</h3>
            <form id="addCustomPropertyTypeForm">
                <div class="form-group">
                    <label class="form-group__label required-field">Property Type Name</label>
                    <input type="text" class="form-group__input" id="customPropertyTypeName" required placeholder="e.g., Luxury Condos, Mobile Homes, etc.">
                    <div class="validation-message" id="customPropertyTypeName-validation"></div>
                </div>
                <div class="form-group">
                    <label class="form-group__label">Property Type Icon</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" class="form-group__input" id="customPropertyTypeIcon" placeholder="üèòÔ∏è" maxlength="2" style="flex: 1;">
                        <button type="button" class="btn btn--info" onclick="toggleCustomPropertyEmojiPicker()" style="padding: 12px 16px;" title="Pick Emoji">
                            üòä
                        </button>
                    </div>
                    <div class="validation-message" id="customPropertyTypeIcon-validation"></div>
                    <small>Optional - single emoji to represent this property type</small>
                    
                    <!-- Emoji Picker for Custom Property -->
                    <div id="customPropertyEmojiPicker" style="display: none; margin-top: 10px; padding: 15px; background: var(--background-card); border: 1px solid var(--border-color); border-radius: 8px; box-shadow: var(--box-shadow);">
                        <div style="margin-bottom: 10px;">
                            <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üè† Houses & Buildings</strong>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üè†')">üè†</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üè°')">üè°</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèòÔ∏è')">üèòÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üè¢')">üè¢</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üè¨')">üè¨</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üè≠')">üè≠</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèóÔ∏è')">üèóÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèöÔ∏è')">üèöÔ∏è</button>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 10px;">
                            <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üè∞ Special Properties</strong>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üè∞')">üè∞</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèØ')">üèØ</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üóº')">üóº</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üïå')">üïå</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('‚õ™')">‚õ™</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèõÔ∏è')">üèõÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèüÔ∏è')">üèüÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üé™')">üé™</button>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 10px;">
                            <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üèïÔ∏è Outdoor & Recreation</strong>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèïÔ∏è')">üèïÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('‚õ∫')">‚õ∫</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèûÔ∏è')">üèûÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèñÔ∏è')">üèñÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèùÔ∏è')">üèùÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('‚õ∞Ô∏è')">‚õ∞Ô∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèîÔ∏è')">üèîÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üóª')">üóª</button>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 10px;">
                            <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üöó Transportation & Access</strong>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üöó')">üöó</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üöô')">üöô</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèéÔ∏è')">üèéÔ∏è</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üöê')">üöê</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üöõ')">üöõ</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üöå')">üöå</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üöÇ')">üöÇ</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('‚úàÔ∏è')">‚úàÔ∏è</button>
                            </div>
                        </div>
                        
                        <div>
                            <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üíé Luxury & Premium</strong>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üíé')">üíé</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üëë')">üëë</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üåü')">üåü</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('‚≠ê')">‚≠ê</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('‚ú®')">‚ú®</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üî•')">üî•</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üí∞')">üí∞</button>
                                <button type="button" class="emoji-btn" onclick="insertCustomPropertyEmoji('üèÜ')">üèÜ</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn btn--primary" style="flex: 1;">Add Property Type</button>
                    <button type="button" class="btn btn--secondary" onclick="modalManager.close('addCustomPropertyTypeModal')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Manage Maintenance Tips Modal -->
    <div class="modal-overlay" id="maintenanceTipsModal">
        <div class="modal">
            <h3 style="margin-bottom: 20px; color: var(--primary-color);">üîß Manage Maintenance Tips</h3>
            
            <div style="margin-bottom: 20px; padding: 15px; background: var(--background-light); border: 1px solid var(--border-color); border-radius: 6px;">
                <strong style="color: var(--primary-color);">Current Month: </strong>
                <span id="modalCurrentMonth" style="text-transform: capitalize;"></span>
            </div>
            
            <div id="modalMaintenanceTipsList" style="margin-bottom: 20px; max-height: 300px; overflow-y: auto;">
                <!-- Maintenance tips will be rendered here -->
            </div>
            
            <div class="form-group">
                <label class="form-group__label">Add New Tip</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" class="form-group__input" id="modalNewMaintenanceTip" placeholder="Enter a new maintenance tip..." style="flex: 1;">
                    <button type="button" class="btn btn--info" onclick="toggleModalEmojiPicker()" style="padding: 12px 16px;" title="Add Emoji">
                        üòä
                    </button>
                    <button type="button" class="btn btn--primary" onclick="addModalMaintenanceTip()" style="padding: 12px 20px;">
                        Add Tip
                    </button>
                </div>
                
                <!-- Emoji Picker -->
                <div id="modalEmojiPicker" style="display: none; margin-top: 10px; padding: 15px; background: var(--background-card); border: 1px solid var(--border-color); border-radius: 8px; box-shadow: var(--box-shadow);">
                    <div style="margin-bottom: 10px;">
                        <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üîß Tools & Maintenance</strong>
                        <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üîß')">üîß</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üî®')">üî®</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('ü™ö')">ü™ö</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('‚öíÔ∏è')">‚öíÔ∏è</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üß∞')">üß∞</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('‚öôÔ∏è')">‚öôÔ∏è</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üî©')">üî©</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('‚ö°')">‚ö°</button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üè† Home & Garden</strong>
                        <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üè†')">üè†</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üè°')">üè°</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('ü™ü')">ü™ü</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üö™')">üö™</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üåø')">üåø</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üå±')">üå±</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üå≥')">üå≥</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üå∫')">üå∫</button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üå¶Ô∏è Weather & Seasons</strong>
                        <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('‚ùÑÔ∏è')">‚ùÑÔ∏è</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üå®Ô∏è')">üå®Ô∏è</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('‚òÄÔ∏è')">‚òÄÔ∏è</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üåßÔ∏è')">üåßÔ∏è</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üí®')">üí®</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üçÇ')">üçÇ</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üå°Ô∏è')">üå°Ô∏è</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üßä')">üßä</button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üíß Utilities & Safety</strong>
                        <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üíß')">üíß</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üöø')">üöø</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üî•')">üî•</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üí°')">üí°</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üö®')">üö®</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üßπ')">üßπ</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üßΩ')">üßΩ</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üß¥')">üß¥</button>
                        </div>
                    </div>
                    
                    <div>
                        <strong style="color: var(--primary-color); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">üìã Tasks & Reminders</strong>
                        <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px;">
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üìã')">üìã</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('‚úÖ')">‚úÖ</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üìù')">üìù</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üìÖ')">üìÖ</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('‚è∞')">‚è∞</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üîî')">üîî</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('‚ö†Ô∏è')">‚ö†Ô∏è</button>
                            <button type="button" class="emoji-btn" onclick="insertModalEmoji('üéØ')">üéØ</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: var(--background-light); border: 1px solid var(--border-color); border-radius: 6px;">
                <button type="button" class="btn btn--secondary btn--full" onclick="resetToDefaultTips()" style="margin-bottom: 10px;">
                    üîÑ Reset to Default Seasonal Tips
                </button>
                <small style="display: block; text-align: center; color: var(--text-muted);">This will restore the original tips for the selected month and remove all custom tips</small>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button type="button" class="btn btn--primary" onclick="modalManager.close('maintenanceTipsModal')" style="flex: 1;">Done</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <section class="main-content">
        <div class="content-container">
            <div class="dashboard-container">
                <!-- Sidebar -->
                <div class="sidebar">
                    <div class="app-header">
                        <h1>Newsletter Builder Pro</h1>
                        <p class="subtitle">Enhanced Real Estate Marketing</p>
                        <div class="edition-badge">
                            <strong id="currentMonth">June 2025 Edition</strong><br>
                            <small>üöÄ Production Ready</small>
                        </div>
                    </div>
                    
                    <div class="form-content">
                        <!-- Newsletter Builder Form Content will be rendered here by JavaScript -->
                        <div id="formSections"></div>
                        
                        <button class="btn btn--primary btn--full" onclick="generateNewsletter()" style="font-size: 16px; padding: 16px 24px;">
                            ‚ú® Generate Newsletter
                        </button>
                    </div>
                </div>

                <!-- Preview Container -->
                <div class="preview-container">
                    <div class="preview-header">
                        <button onclick="toggleInstructionsPopup()" class="btn btn--primary" style="font-size: 14px; padding: 12px 24px;">
                            üìñ Quick User Guide
                        </button>
                        
                        <!-- Instructions Popup -->
                        <div id="instructionsPopup" style="display: none; margin-top: 20px; padding: 20px; background: white; border: 2px solid var(--primary-color); border-radius: 12px; text-align: left; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                            <h3 style="color: var(--primary-color); margin-bottom: 15px; font-size: 18px;">üöÄ Quick Start Guide</h3>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: var(--text-light); font-size: 14px; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                    <span style="background: var(--primary-color); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">1</span>
                                    Choose Your Month & Style
                                </h4>
                                <p style="margin: 0 0 0 32px; font-size: 13px; color: var(--text-muted); line-height: 1.4;">Select your newsletter month and banner style. Try the Royal LePage branding button for instant professional colors!</p>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: var(--text-light); font-size: 14px; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                    <span style="background: var(--primary-color); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">2</span>
                                    Add Your Personal Message
                                </h4>
                                <p style="margin: 0 0 0 32px; font-size: 13px; color: var(--text-muted); line-height: 1.4;">Write your opening message and customize Smart Buttons by adding URLs to your website, guides, or resources.</p>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: var(--text-light); font-size: 14px; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                    <span style="background: var(--primary-color); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">3</span>
                                    Enter Market Statistics
                                </h4>
                                <p style="margin: 0 0 0 32px; font-size: 13px; color: var(--text-muted); line-height: 1.4;">Fill in your local market data. You can edit property type names, add custom types, and customize colors.</p>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: var(--text-light); font-size: 14px; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                    <span style="background: var(--primary-color); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">4</span>
                                    Add Events & Your Information
                                </h4>
                                <p style="margin: 0 0 0 32px; font-size: 13px; color: var(--text-muted); line-height: 1.4;">Include community events with images, update maintenance tips, and fill in your contact information and photos.</p>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h4 style="color: var(--text-light); font-size: 14px; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                                    <span style="background: var(--primary-color); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold;">5</span>
                                    Generate & Export
                                </h4>
                                <p style="margin: 0 0 0 32px; font-size: 13px; color: var(--text-muted); line-height: 1.4;">Click "Generate Newsletter" to see your preview, then use "Export Options" to copy for email, download HTML, or print.</p>
                            </div>
                            
                            <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--border-color);">
                                <p style="margin: 0; font-size: 12px; color: var(--text-muted); text-align: center; font-style: italic;">
                                    üí° Tip: Use Ctrl/Cmd + Enter to quickly generate your newsletter at any time!
                                </p>
                            </div>
                            
                            <div style="text-align: center; margin-top: 15px;">
                                <button onclick="toggleInstructionsPopup()" style="background: var(--primary-color); color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer; font-size: 13px; font-weight: 500;">
                                    Got it! üëç
                                </button>
                            </div>
                        </div>
                        
                        <p style="color: var(--text-muted); margin-top: 15px; font-size: 14px;">
                            <span id="previewStatus">üìù Start filling out the form to see your newsletter preview</span>
                        </p>
                    </div>
                    
                    <div class="newsletter-preview" id="newsletterPreview">
                        <!-- Newsletter content will be generated here -->
                    </div>
                    
                    <div class="preview-actions" style="padding-bottom: 20px;">
                        <button class="btn btn--secondary" onclick="quickPrint()">
                            üñ®Ô∏è Print
                        </button>
                        <button class="btn btn--primary" onclick="modalManager.show('exportModal')">
                            üìß Export Options
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Builder Pro JavaScript -->
    <script>
        // Navigation System Functions
        function toggleSphereMenu() {
            const menu = document.getElementById('spherePopoutMenu');
            const overlay = document.getElementById('sphereOverlay');
            
            if (menu.classList.contains('active')) {
                closeSphereMenu();
            } else {
                menu.classList.add('active');
                overlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeSphereMenu() {
            const menu = document.getElementById('spherePopoutMenu');
            const overlay = document.getElementById('sphereOverlay');
            
            menu.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close menu when clicking overlay
        document.addEventListener('click', (e) => {
            if (e.target.id === 'sphereOverlay') {
                closeSphereMenu();
            }
        });

        // Close menu on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeSphereMenu();
            }
        });
        // Global state
        let newsletterData = {
            design: {
                bannerStyle: 'mountains',
                headerFont: "'Playfair Display', serif",
                bodyFont: "'Montserrat', sans-serif",
                hideCustomBannerText: false,
                colors: {
                    headerText: '#333333',
                    bodyText: '#555555',
                    accent: '#f39c12',
                    background: '#f8f9fa'
                },
            defaultPropertyTypes: [
                {
                    id: 'detached',
                    name: 'Detached Homes',
                    icon: 'üè†',
                    colorKey: 'detached',
                    required: false
                },
                {
                    id: 'semi',
                    name: 'Semi-Detached',
                    icon: 'üèòÔ∏è',
                    colorKey: 'semi',
                    required: false
                },
                {
                    id: 'row',
                    name: 'Row/Townhomes',
                    icon: 'üèòÔ∏è',
                    colorKey: 'row',
                    required: false
                },
                {
                    id: 'apartment',
                    name: 'Apartments/Condos',
                    icon: 'üè¢',
                    colorKey: 'apartment',
                    required: false
                }
            ],
                buttonColors: {
                    buyersGuide: '#f39c12',
                    sellersGuide: '#2c3e50',
                    website: '#27ae60',
                    blog: '#3498db',
                    marketReport: '#f39c12',
                    eventDetails: '#f39c12'
                },
                propertyTypeColors: {
                    detached: '#f39c12',
                    semi: '#2c3e50',
                    row: '#27ae60',
                    apartment: '#3498db',
                    custom: '#9b59b6'
                }
            },
            images: {
                currentEventImage: null,
                agentPhoto: null,
                agentLogo: null,
                brokerageLogo: null,
                customBanner: null
            },
            stats: {
                avgPrice: '$589,900',
                priceChange: '-2.5%',
                homesSold: '2,568',
                salesChange: '-16.9%',
                newListings: '4,842',
                listingsChange: '+11.6%',
                inventory: '6,740',
                inventoryChange: '+97.5%',
                monthsOfSupply: '2.62',
                supplyChange: '+137.7%',
                
                detachedPrice: '$769,400',
                detachedChange: '+1.0%',
                detachedSales: '1,275',
                detachedSalesChange: '-8%',
                detachedListings: '2,419',
                detachedListingsChange: '+19%',
                detachedInventory: '2,995',
                detachedInventoryChange: '+87%',
                detachedSupply: '2.35',
                
                semiPrice: '$697,300',
                semiChange: '+2.8%',
                semiSales: '256',
                semiSalesChange: '-1%',
                semiListings: '428',
                semiListingsChange: '+19%',
                semiInventory: '542',
                semiInventoryChange: '+99%',
                semiSupply: '2.12',
                
                rowPrice: '$453,600',
                rowChange: '-1.9%',
                rowSales: '458',
                rowSalesChange: '-15%',
                rowListings: '764',
                rowListingsChange: '+11%',
                rowInventory: '1,116',
                rowInventoryChange: '+161%',
                rowSupply: '2.44',
                
                apartmentPrice: '$335,300',
                apartmentChange: '-1.5%',
                apartmentSales: '579',
                apartmentSalesChange: '-36%',
                apartmentListings: '1,231',
                apartmentListingsChange: '-2%',
                apartmentInventory: '2,087',
                apartmentInventoryChange: '+88%',
                apartmentSupply: '3.60'
            },
            agent: {
                name: '',
                company: '',
                phone: '',
                email: '',
                website: '',
                // Smart Button settings - simplified to just names and URLs
                smartButtons: {
                    buyersGuide: {
                        name: 'Button 1',
                        url: ''
                    },
                    sellersGuide: {
                        name: 'Button 2', 
                        url: ''
                    },
                    website: {
                        name: 'Button 3',
                        url: ''
                    },
                    blog: {
                        name: 'Button 4',
                        url: ''
                    }
                }
            },
            content: {
                personalMessage: 'With school winding down and the sun heating up, June is a top month for real estate. Let\'s make your next move a smooth one.',
                newsletterSeason: 'june',
                customSubtitle: 'SUMMER STARTS',
                marketButtonText: '',
                marketButtonUrl: ''
            },
            customPropertyTypes: [],
            customEvents: [],
            maintenanceTips: [
                '‚ùÑÔ∏è Test A/C and change filters',
                'üåßÔ∏è Check eavestrough slope and extension', 
                'üîß Inspect fence posts for shifting',
                'ü™ü Wash windows and inspect screens',
                'üí® Secure patio furniture before windstorms'
            ]
        };

        // Season configurations
        const SEASONS = {
            january: {
                title: 'JANUARY NEWSLETTER',
                subtitle: 'NEW BEGINNINGS',
                personalMessage: 'Happy New Year! A fresh start brings new opportunities‚Äîwhether it\'s upgrading your space or buying your first home. Let\'s make 2025 the year of great moves!',
                tips: ['üîß Replace furnace filter', 'üíß Use humidifier to combat dry air', 'üßä Watch for ice dams after Chinooks', '‚ùÑÔ∏è Check for frost in attic/basement', 'üö® Test smoke & CO detectors']
            },
            february: {
                title: 'FEBRUARY NEWSLETTER',
                subtitle: 'LOVE YOUR HOME',
                personalMessage: 'Love is in the air‚Äîand so is opportunity! Whether you\'re buying, selling, or just curious, I\'m here to help you find a home you\'ll love.',
                tips: ['üå®Ô∏è Clear snow from foundation & vents', 'üö™ Inspect weather stripping after freeze-thaw', 'üîê Lubricate locks & garage mechanisms', 'üíß Monitor for condensation inside windows', '‚ö° Test sump pump for early thaw']
            },
            march: {
                title: 'MARCH NEWSLETTER',
                subtitle: 'SPRING PREP',
                personalMessage: 'As the snow melts and days grow longer, now\'s the time to start thinking spring market. Real estate is warming up‚Äîare you ready?',
                tips: ['‚òÄÔ∏è Begin clearing snow from perimeter', 'üíß Check grading for pooling meltwater', 'üè† Book roof inspection before spring rain', 'üå≥ Trim snow-damaged tree limbs', 'üå± Prep garden tools & order supplies']
            },
            april: {
                title: 'APRIL NEWSLETTER',
                subtitle: 'SPRING AWAKENING',
                personalMessage: 'Spring is in full swing! It\'s a great time to freshen up your home or explore new listings. Let\'s talk about what\'s happening in your area.',
                tips: ['üåßÔ∏è Clean gutters/downspouts', 'üè† Inspect shingles & siding for winter damage', 'üíß Test exterior taps (after final frost)', 'üîß Caulk windows and doors', 'üåø Fertilize lawn (spring mix)']
            },
            may: {
                title: 'MAY NEWSLETTER',
                subtitle: 'BLOOMING SEASON',
                personalMessage: 'May is for patios, gardening, and maybe even new beginnings. If you\'ve been thinking of a move, the spring market is buzzing!',
                tips: ['üöø Power wash siding, deck, walkways', 'üíß Inspect irrigation system for leaks', 'üîß Reseal driveway and deck surfaces', 'üçñ Clean BBQ and prep outdoor living space', 'üêõ Monitor for signs of pests and insects']
            },
            june: {
                title: 'JUNE NEWSLETTER',
                subtitle: 'SUMMER STARTS',
                personalMessage: 'With school winding down and the sun heating up, June is a top month for real estate. Let\'s make your next move a smooth one.',
                tips: ['‚ùÑÔ∏è Test A/C and change filters', 'üåßÔ∏è Check eavestrough slope and extension', 'üîß Inspect fence posts for shifting', 'ü™ü Wash windows and inspect screens', 'üí® Secure patio furniture before windstorms']
            },
            july: {
                title: 'JULY NEWSLETTER',
                subtitle: 'SUMMER LIVING',
                personalMessage: 'It\'s summer fun and sunshine! The market\'s still active, and I\'m here to help you take the next step‚Äîwhether you\'re buying or selling.',
                tips: ['üå≥ Trim trees near home (hail + wind risk)', 'üè† Check attic insulation and ventilation', '‚òÄÔ∏è Use UV films or blinds on sunny windows', 'üíß Water lawn early mornings (drought)', 'üî• Inspect dryer vent (fire safety)']
            },
            august: {
                title: 'AUGUST NEWSLETTER',
                subtitle: 'LATE SUMMER',
                personalMessage: 'Before fall routines kick in, August is the perfect time to make a move or prep your home for sale. Let\'s chat about your next step!',
                tips: ['üè† Review roof for hail damage', 'üî• Prep furnace for fall (early servicing)', 'üßπ Deep clean garage or shed', 'üìã Plan fall landscaping or repairs', 'üé® Touch up exterior paint']
            },
            september: {
                title: 'SEPTEMBER NEWSLETTER',
                subtitle: 'FALL PREP',
                personalMessage: 'As routines return and leaves begin to turn, it\'s a great time to revisit your real estate goals. Fall can be full of opportunity!',
                tips: ['üíß Blow out sprinklers before frost', 'üåø Fertilize lawn (fall mix)', 'üî• Inspect chimney and fireplace', 'üì¶ Store summer tools and patio gear', 'üê≠ Check attic and garage for rodent entry']
            },
            october: {
                title: 'OCTOBER NEWSLETTER',
                subtitle: 'AUTUMN COMFORT',
                personalMessage: 'Fall is here and so is one of the coziest times to shop for a new place. Let\'s talk listings, market trends, or your real estate wish list!',
                tips: ['‚ùÑÔ∏è Winterize outdoor faucets and hoses', 'üçÇ Rake and compost leaves', 'üè† Inspect foundation for cracks', 'üî• Test heating system and thermostat', 'üö™ Apply weather seal to doors/windows']
            },
            november: {
                title: 'NOVEMBER NEWSLETTER',
                subtitle: 'THANKSGIVING SEASON',
                personalMessage: 'Before the holiday rush, November is a great time to review your plans. Thinking of a move in the new year? Let\'s get ahead of it together.',
                tips: ['‚ùÑÔ∏è Prepare snow removal equipment', '‚ùÑÔ∏è Cover or store A/C units', 'üí° Install exterior light timers', 'üßä Stock ice melt and emergency supplies', 'üîß Replace furnace filter']
            },
            december: {
                title: 'DECEMBER NEWSLETTER',
                subtitle: 'HOLIDAY SEASON',
                personalMessage: 'Wishing you a warm and peaceful holiday season! Whether you\'re cozy at home or planning a change in the new year, I\'m here when you need me.',
                tips: ['‚ùÑÔ∏è Clear snow from roof edges and vents', 'üö® Test CO detectors during peak furnace use', 'üí® Check for drafts around windows', 'üö∂ Keep exits and walkways snow-free', 'üè† Inspect roof load if heavy snowfalls occur']
            }
        };

        // Imgur API integration (Note: In production, you'd want proper error handling)
        const IMGUR_CLIENT_ID = '203a7e94de049ff';
        
        async function uploadToImgur(file, imageKey) {
            // Note: Due to Claude artifact limitations, Imgur upload won't work
            // This is a mock implementation
            showToast('üì§ Image upload simulated (Imgur not available in this environment)', 'info', 3000);
            
            // Create a local URL for preview purposes
            const localUrl = URL.createObjectURL(file);
            newsletterData.images[imageKey] = localUrl;
            
            updatePreview();
            return localUrl;
        }

        // Time formatting helper
        function formatEventTime(startTime, endTime) {
            if (!startTime) return '';
            
            function formatTime(timeStr) {
                const [hours, minutes] = timeStr.split(':');
                const hour12 = hours % 12 || 12;
                const ampm = hours >= 12 ? 'PM' : 'AM';
                return `${hour12}:${minutes} ${ampm}`;
            }
            
            const formattedStart = formatTime(startTime);
            
            if (endTime) {
                const formattedEnd = formatTime(endTime);
                return `${formattedStart} - ${formattedEnd}`;
            }
            
            return formattedStart;
        }

        // Date formatting helper
        function formatEventDate(dateString) {
            const [year, month, day] = dateString.split('-');
            const monthNames = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 
                               'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'];
            return {
                month: monthNames[parseInt(month) - 1],
                day: parseInt(day)
            };
        }

        // Render form sections
        function renderFormSections() {
            const container = document.getElementById('formSections');
            container.innerHTML = `
                <!-- Month & Banner Design -->
                <div class="form-section fade-in">
                    <h3 class="form-section__header">üé® Month & Banner Design</h3>
                    <div class="form-group">
                        <label class="form-group__label">Newsletter Month</label>
                        <select class="form-group__select" id="newsletterSeason">
                            <option value="january">January - New Beginnings</option>
                            <option value="february">February - Love Your Home</option>
                            <option value="march">March - Spring Prep</option>
                            <option value="april">April - Spring Awakening</option>
                            <option value="may">May - Blooming Season</option>
                            <option value="june" selected>June - Summer Starts</option>
                            <option value="july">July - Summer Living</option>
                            <option value="august">August - Late Summer</option>
                            <option value="september">September - Fall Prep</option>
                            <option value="october">October - Autumn Comfort</option>
                            <option value="november">November - Thanksgiving Season</option>
                            <option value="december">December - Holiday Season</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-group__label">Banner Style</label>
                        <select class="form-group__select" id="bannerStyle">
                            <option value="mountains" selected>Mountains</option>
                            <option value="cityscape">City Skyline</option>
                            <option value="blueprint">Blueprint</option>
                            <option value="minimal">Clean Minimal</option>
                            <option value="custom">Custom Banner Image</option>
                            <option value="none">No Banner</option>
                        </select>
                    </div>
                    
                    <!-- Custom Banner Upload -->
                    <div class="form-group" id="customBannerUpload" style="display: none;">
                        <label class="form-group__label">Custom Banner Image</label>
                        <input type="file" class="form-group__input" id="customBanner" accept="image/*" onchange="handleImageUpload('customBanner', 'customBanner')">
                        <div class="image-preview" id="customBannerPreview" style="margin-top: 10px; display: none;">
                            <img style="width: 200px; height: 100px; object-fit: cover; border: 2px solid #ddd; border-radius: 4px;">
                            <button type="button" onclick="removeImage('customBanner', 'customBanner')" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">Remove</button>
                        </div>
                        <small>üìè Recommended size: 600x300px or similar landscape ratio</small>
                        
                        <div style="margin-top: 15px; padding: 15px; background: var(--background-light); border: 1px solid var(--border-color); border-radius: 6px;">
                            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; margin: 0;">
                                <input type="checkbox" id="hideCustomBannerText" onchange="handleFormChange('hideCustomBannerText', this.checked)" style="width: 18px; height: 18px;">
                                <div style="flex: 1;">
                                    <div style="font-weight: 500; color: var(--text-light); font-size: 14px;">Hide banner text overlay</div>
                                    <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Remove the month/newsletter title text from your custom banner</div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Personal Message -->
                <div class="form-section fade-in">
                    <h3 class="form-section__header">üí¨ Personal Message</h3>
                    <div class="form-group">
                        <label class="form-group__label">Custom Subtitle</label>
                        <input type="text" class="form-group__input" id="customSubtitle" value="SUMMER STARTS" placeholder="Enter custom subtitle...">
                        <div class="validation-message" id="customSubtitle-validation"></div>
                        <small>Leave blank to use default seasonal subtitle</small>
                    </div>
                    <div class="form-group">
                        <label class="form-group__label required-field">Opening Message</label>
                        <textarea class="form-group__textarea" id="personalMessage" rows="4" required>With school winding down and the sun heating up, June is a top month for real estate. Let's make your next move a smooth one.</textarea>
                        <div class="validation-message" id="personalMessage-validation"></div>
                        <small>Minimum 50 characters, maximum 500 characters</small>
                    </div>
                </div>
                
                <!-- Smart Buttons -->
                <div class="form-section fade-in">
                    <h3 class="form-section__header">üîó Smart Buttons</h3>
                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 20px;">
                        Use Smart Buttons to quickly add clickable links to your newsletter. Just copy and paste any website URL to instantly direct readers to your website, buyer or seller guides, blogs, or any resource you choose. Simple, practical, and effective.
                    </p>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-group__label">üîò Smart Button 1 Name</label>
                            <input type="text" class="form-group__input" id="buyersGuideName" value="Button 1" placeholder="Button 1">
                            <div class="validation-message" id="buyersGuideName-validation"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-group__label">Smart Button 1 URL</label>
                            <input type="url" class="form-group__input" id="buyersGuideUrl" value="" placeholder="https://example.com/button1">
                            <div class="validation-message" id="buyersGuideUrl-validation"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-group__label">üîò Smart Button 2 Name</label>
                            <input type="text" class="form-group__input" id="sellersGuideName" value="Button 2" placeholder="Button 2">
                            <div class="validation-message" id="sellersGuideName-validation"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-group__label">Smart Button 2 URL</label>
                            <input type="url" class="form-group__input" id="sellersGuideUrl" value="" placeholder="https://example.com/button2">
                            <div class="validation-message" id="sellersGuideUrl-validation"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-group__label">üîò Smart Button 3 Name</label>
                            <input type="text" class="form-group__input" id="websiteName" value="Button 3" placeholder="Button 3">
                            <div class="validation-message" id="websiteName-validation"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-group__label">Smart Button 3 URL</label>
                            <input type="url" class="form-group__input" id="myWebsiteUrl" value="" placeholder="https://example.com/button3">
                            <div class="validation-message" id="myWebsiteUrl-validation"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-group__label">üîò Smart Button 4 Name</label>
                            <input type="text" class="form-group__input" id="blogName" value="Button 4" placeholder="Button 4">
                            <div class="validation-message" id="blogName-validation"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-group__label">Smart Button 4 URL</label>
                            <input type="url" class="form-group__input" id="blogUrl" value="" placeholder="https://example.com/button4">
                            <div class="validation-message" id="blogUrl-validation"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Market Statistics -->
                <div class="form-section fade-in">
                    <h3 class="form-section__header">üìä Market Statistics</h3>
                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 20px;">
                        Enter your market statistics manually. The system will organize them into a professional layout.
                    </p>
                    
                    <div class="stats-grid" id="statsGrid">
                        <!-- Stats will be rendered here -->
                    </div>
                    
                    <!-- Custom Property Types Container -->
                    <div id="customPropertyTypesContainer">
                        <!-- Custom property types will be rendered here -->
                    </div>
                    
                    <button type="button" class="btn" onclick="modalManager.show('addCustomPropertyTypeModal')" style="margin: 20px 0; width: 100%; background: #f39c12; color: white; border: none; padding: 12px 20px; border-radius: 8px; font-size: 13px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; justify-content: center; gap: 8px; min-height: 44px;">
                        + Add Custom Property Type
                    </button>
                </div>
                
                <!-- Monthly Maintenance Tips -->
                <div class="form-section fade-in">
                    <h3 class="form-section__header">üîß Monthly Maintenance Tips</h3>
                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 15px;">
                        Manage maintenance tips for the selected month. Tips automatically update when you change months.
                    </p>
                    
                    <div id="maintenanceTipsSummary" style="margin-bottom: 20px; padding: 15px; background: var(--background-light); border: 1px solid var(--border-color); border-radius: 6px;">
                        <!-- Summary will be rendered here -->
                    </div>
                    
                    <button type="button" class="btn btn--primary btn--full" onclick="openMaintenanceTipsModal()">
                        üîß Manage Maintenance Tips
                    </button>
                </div>
                
                <!-- Community Calendar & Events -->
                <div class="form-section fade-in">
                    <h3 class="form-section__header">üìÖ Community Calendar & Events</h3>
                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 15px;">
                        Add your community events with optional images automatically hosted on Imgur for email compatibility.
                    </p>
                    <button type="button" class="btn btn--primary btn--full" onclick="modalManager.show('addEventModal')">
                        + Add Event
                    </button>
                    <div id="customEventsList" style="margin-top: 15px;">
                        <!-- Custom events will appear here -->
                    </div>
                </div>
                
                <!-- Your Information -->
                <div class="form-section fade-in">
                    <h3 class="form-section__header">üë§ Your Information</h3>
                    <div class="form-group">
                        <label class="form-group__label required-field">Full Name</label>
                        <input type="text" class="form-group__input" id="agentName" value="" required>
                        <div class="validation-message" id="agentName-validation"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-group__label required-field">Company Name</label>
                        <input type="text" class="form-group__input" id="companyName" value="" required>
                        <div class="validation-message" id="companyName-validation"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-group__label required-field">Phone</label>
                            <input type="tel" class="form-group__input" id="agentPhone" value="" required>
                            <div class="validation-message" id="agentPhone-validation"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-group__label required-field">Email</label>
                            <input type="email" class="form-group__input" id="agentEmail" value="" required>
                            <div class="validation-message" id="agentEmail-validation"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-group__label required-field">Website</label>
                        <input type="url" class="form-group__input" id="agentWebsite" value="" required>
                        <div class="validation-message" id="agentWebsite-validation"></div>
                    </div>
                    
                    <hr style="border: none; border-top: 1px solid var(--border-color); margin: 20px 0;">
                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 15px;">
                        üì∑ Upload your professional photos and logos (automatically hosted on Imgur)
                    </p>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-group__label">Agent Photo</label>
                            <input type="file" class="form-group__input" id="agentPhoto" accept="image/*" onchange="handleImageUpload('agentPhoto', 'agentPhoto')">
                            <div class="image-preview" id="agentPhotoPreview" style="margin-top: 10px; display: none;">
                                <img style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid #ddd;">
                                <button type="button" onclick="removeImage('agentPhoto', 'agentPhoto')" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">Remove</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-group__label">Agent Logo</label>
                            <input type="file" class="form-group__input" id="agentLogo" accept="image/*" onchange="handleImageUpload('agentLogo', 'agentLogo')">
                            <div class="image-preview" id="agentLogoPreview" style="margin-top: 10px; display: none;">
                                <img style="width: 80px; height: 60px; object-fit: contain; border: 2px solid #ddd; border-radius: 4px;">
                                <button type="button" onclick="removeImage('agentLogo', 'agentLogo')" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">Remove</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-group__label">Brokerage Logo</label>
                        <input type="file" class="form-group__input" id="brokerageLogo" accept="image/*" onchange="handleImageUpload('brokerageLogo', 'brokerageLogo')">
                        <div class="image-preview" id="brokerageLogoPreview" style="margin-top: 10px; display: none;">
                            <img style="width: 120px; height: 60px; object-fit: contain; border: 2px solid #ddd; border-radius: 4px;">
                            <button type="button" onclick="removeImage('brokerageLogo', 'brokerageLogo')" style="margin-left: 10px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">Remove</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize and render all functions (simplified version)
        function initializeApp() {
            renderFormSections();
            renderStats();
            setupEventListeners();
            updateMonthDisplay();
            updateEventsList();
            renderMaintenanceTipsSummary();
            updatePreview();
            showToast('üöÄ Newsletter Builder Pro ready!', 'success', 4000);
        }

        // Simplified versions of key functions
        function renderStats() {
            // Render basic market statistics grid
            const container = document.getElementById('statsGrid');
            container.innerHTML = '<div>Market statistics form will load here...</div>';
        }

        function setupEventListeners() {
            // Basic event listener setup
            document.addEventListener('change', (e) => {
                if (e.target.type === 'select-one') {
                    handleFormChange(e.target.id, e.target.value);
                }
            });
        }

        function handleFormChange(fieldId, value) {
            // Simplified form change handler
            console.log(`Form change: ${fieldId} = ${value}`);
        }

        function updateMonthDisplay() {
            const month = newsletterData.content.newsletterSeason || 'june';
            const monthName = month.charAt(0).toUpperCase() + month.slice(1);
            document.getElementById('currentMonth').textContent = `${monthName} 2025 Edition`;
        }

        function updateEventsList() {
            const container = document.getElementById('customEventsList');
            container.innerHTML = '<div>No events added yet</div>';
        }

        function renderMaintenanceTipsSummary() {
            const container = document.getElementById('maintenanceTipsSummary');
            container.innerHTML = '<div>5 maintenance tips loaded</div>';
        }

        function updatePreview() {
            const container = document.getElementById('newsletterPreview');
            container.innerHTML = '<div style="text-align: center; padding: 40px; color: #666;">Newsletter preview will appear here when you fill out the form</div>';
        }

        function generateNewsletter() {
            updatePreview();
            showToast('‚ú® Newsletter generated!', 'success');
        }

        function showToast(message, type = 'info', duration = 3000) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast toast--${type}`;
            toast.textContent = message;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        // Modal manager
        const modalManager = {
            show: (modalId) => {
                const modal = document.getElementById(modalId);
                if (modal) modal.classList.add('modal-overlay--show');
            },
            close: (modalId) => {
                const modal = document.getElementById(modalId);
                if (modal) modal.classList.remove('modal-overlay--show');
            }
        };

        // Export manager
        const exportManager = {
            copyEmailSafeHTML: () => {
                showToast('‚úÖ Newsletter copied for email!', 'success', 3000);
            },
            exportAsHTML: () => {
                showToast('‚úÖ Newsletter exported!', 'success', 3000);
            },
            printNewsletter: () => {
                window.print();
            }
        };

        // Helper functions for modals
        function toggleInstructionsPopup() {
            const popup = document.getElementById('instructionsPopup');
            popup.style.display = popup.style.display === 'none' ? 'block' : 'none';
        }

        function quickPrint() {
            window.print();
        }

        function openMaintenanceTipsModal() {
            modalManager.show('maintenanceTipsModal');
        }

        function handleImageUpload(inputId, imageKey) {
            console.log(`Image upload: ${inputId} for ${imageKey}`);
        }

        function removeImage(inputId, imageKey) {
            console.log(`Remove image: ${inputId} for ${imageKey}`);
        }

        function handleEventImageUpload() {
            console.log('Event image upload');
        }

        function removeEventImage() {
            console.log('Remove event image');
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);

        // Close modals when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                const modalId = e.target.id;
                modalManager.close(modalId);
            }
        });
    </script>
</body>
</html>

<!-- 
üìã HOW TO USE THIS TEMPLATE:

1. **Copy this file** to create a new page
2. **Rename it** (e.g., about.html, contact.html, services.html)
3. **Update the <title>** in the <head> section
4. **Replace the content** between the MAIN CONTENT comments
5. **Adjust CSS file paths** if placing in a subfolder:
   - Root level: href="assets/css/..."
   - Subfolder: href="../assets/css/..."
6. **Add to navigation menu** by uncommenting the menu item example
7. **Customize colors, fonts, and styling** in the <style> section

üìÅ FILE STRUCTURE EXAMPLES:

For root level pages:
- about.html (use: href="assets/css/...")
- contact.html (use: href="assets/css/...")

For pages in subfolders:
- services/index.html (use: href="../assets/css/...")
- blog/index.html (use: href="../assets/css/...")

üé® CUSTOMIZATION TIPS:

- Change the hero background color in .hero-section
- Modify feature icons and descriptions in .feature-card sections
- Add your own CSS in the PAGE-SPECIFIC STYLES section
- Include page-specific JavaScript in the script section
- Update navigation menu to include your new pages

‚ú® This template includes:
- ‚úÖ Responsive navigation system
- ‚úÖ Mobile-friendly design  
- ‚úÖ Professional styling
- ‚úÖ Smooth animations
- ‚úÖ SEO-ready structure
- ‚úÖ Easy customization
-->
